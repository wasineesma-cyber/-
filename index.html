<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
*{margin:0;padding:0;box-sizing:border-box;}

body{
  font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;
  background:#121212;
  color:#e5e7eb;
  min-height:100vh;
}

header{
  background:#1a1a1a;
  padding:22px;
  border-bottom:1px solid #2a2a2a;
}

header h1{
  font-size:1.6rem;
  font-weight:700;
}

.container{
  max-width:800px;
  margin:auto;
  padding:20px 16px 40px;
}

.summary{
  display:grid;
  gap:12px;
  margin-bottom:20px;
}

.card{
  background:#1e1e1e;
  border:1px solid #2a2a2a;
  border-radius:14px;
  padding:16px;
}

.card .label{
  font-size:.85rem;
  color:#9ca3af;
  margin-bottom:6px;
}

.card .amount{
  font-size:1.5rem;
  font-weight:700;
}

.income{color:#4ade80;}
.expense{color:#f87171;}
.balance{color:#60a5fa;}

.section-title{
  margin:20px 0 12px;
  font-size:1rem;
  font-weight:600;
  color:#9ca3af;
}

.form-card{
  background:#1e1e1e;
  border:1px solid #2a2a2a;
  border-radius:14px;
  padding:18px;
}

.type-toggle{
  display:flex;
  gap:10px;
  margin-bottom:16px;
}

.type-btn{
  flex:1;
  padding:10px;
  border-radius:10px;
  border:1px solid #333;
  background:#1a1a1a;
  color:#ccc;
  cursor:pointer;
}

.type-btn.active.income{
  border-color:#4ade80;
  color:#4ade80;
}

.type-btn.active.expense{
  border-color:#f87171;
  color:#f87171;
}

.form-group{
  display:flex;
  flex-direction:column;
  gap:6px;
  margin-bottom:14px;
}

.form-group label{
  font-size:.85rem;
  color:#9ca3af;
}

input,select{
  padding:10px 12px;
  border-radius:10px;
  border:1px solid #333;
  background:#1a1a1a;
  color:#fff;
  font-size:.95rem;
}

input:focus,select:focus{
  outline:none;
  border-color:#6366f1;
  background:#222;
}

button.submit{
  width:100%;
  padding:12px;
  border:none;
  border-radius:12px;
  font-size:1rem;
  font-weight:600;
  background:#6366f1;
  color:white;
  cursor:pointer;
}

button.submit:hover{
  opacity:.9;
}

.tx-list{
  display:flex;
  flex-direction:column;
  gap:10px;
  margin-top:16px;
}

.tx-item{
  background:#1e1e1e;
  border:1px solid #2a2a2a;
  border-radius:12px;
  padding:12px 14px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.tx-item small{
  color:#9ca3af;
  display:block;
  margin-top:2px;
}

canvas{
  margin-top:20px;
}

@media(max-width:600px){
  .summary{grid-template-columns:1fr;}
}
</style>
</head>

<body>

<header>
  <h1>üí∞ ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</h1>
</header>

<div class="container">

  <div class="summary">
    <div class="card">
      <div class="label">‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</div>
      <div id="totalIncome" class="amount income">‡∏ø0</div>
    </div>
    <div class="card">
      <div class="label">‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</div>
      <div id="totalExpense" class="amount expense">‡∏ø0</div>
    </div>
    <div class="card">
      <div class="label">‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠</div>
      <div id="totalBalance" class="amount balance">‡∏ø0</div>
    </div>
  </div>

  <div class="section-title">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</div>

  <div class="form-card">

    <div class="type-toggle">
      <button class="type-btn income active" onclick="setType('income')" id="btnIncome">‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö</button>
      <button class="type-btn expense" onclick="setType('expense')" id="btnExpense">‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</button>
    </div>

    <div class="form-group">
      <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</label>
      <input type="number" id="amount">
    </div>

    <div class="form-group">
      <label>‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</label>
      <select id="category"></select>
    </div>

    <div class="form-group">
      <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>
      <input type="date" id="date">
    </div>

    <div class="form-group">
      <label>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</label>
      <input type="text" id="desc">
    </div>

    <button class="submit" onclick="addEntry()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>

  </div>

  <div class="section-title">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</div>
  <div class="tx-list" id="txList"></div>

  <canvas id="chart" height="120"></canvas>

</div>

<script>
const incomeCats=['‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô','‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à','‡∏•‡∏á‡∏ó‡∏∏‡∏ô','‡∏≠‡∏∑‡πà‡∏ô‡πÜ'];
const expenseCats=['‡∏≠‡∏≤‡∏´‡∏≤‡∏£','‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á','‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å','‡∏ä‡πâ‡∏≠‡∏õ‡∏õ‡∏¥‡πâ‡∏á','‡∏≠‡∏∑‡πà‡∏ô‡πÜ'];

let type='income';
let data=JSON.parse(localStorage.getItem('moneyData')||'[]');

function setType(t){
  type=t;
  btnIncome.classList.toggle('active',t==='income');
  btnExpense.classList.toggle('active',t==='expense');
  renderCats();
}

function renderCats(){
  const cats=type==='income'?incomeCats:expenseCats;
  category.innerHTML=cats.map(c=>`<option>${c}</option>`).join('');
}

function addEntry(){
  const entry={
    id:Date.now(),
    type,
    amount:parseFloat(amount.value),
    category:category.value,
    date:date.value,
    desc:desc.value||category.value
  };
  if(!entry.amount||!entry.date)return;
  data.push(entry);
  localStorage.setItem('moneyData',JSON.stringify(data));
  amount.value='';
  desc.value='';
  render();
}

function render(){
  const now=new Date().toISOString().slice(0,7);
  const month=data.filter(e=>e.date.startsWith(now));
  const income=month.filter(e=>e.type==='income').reduce((s,e)=>s+e.amount,0);
  const expense=month.filter(e=>e.type==='expense').reduce((s,e)=>s+e.amount,0);

  totalIncome.textContent='‡∏ø'+income.toLocaleString();
  totalExpense.textContent='‡∏ø'+expense.toLocaleString();
  totalBalance.textContent='‡∏ø'+(income-expense).toLocaleString();

  txList.innerHTML=month.sort((a,b)=>b.id-a.id).map(e=>`
    <div class="tx-item">
      <div>
        ${e.desc}
        <small>${e.category} ‚Ä¢ ${e.date}</small>
      </div>
      <div class="${e.type==='income'?'income':'expense'}">
        ${e.type==='income'?'+':'-'}‡∏ø${e.amount.toLocaleString()}
      </div>
    </div>
  `).join('');
}

document.getElementById('date').value=new Date().toISOString().slice(0,10);
renderCats();
render();
</script>

</body>
</html>
